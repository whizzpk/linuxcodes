#!/bin/bash





a="0000:00:00.0 PCI bridge: Cavium Networks Device 3400\
0000:00:01.0 PCI bridge: PLX Technology, Inc. Device 8603 (rev ab)\
0000:02:01.0 PCI bridge: PLX Technology, Inc. Device 8603 (rev ab)\
0000:02:02.0 PCI bridge: PLX Technology, Inc. Device 8603 (rev ab)\
0001:00:00.0 PCI bridge: Cavium Networks Device 3400\
0001:00:01.0 PCI bridge: PLX Technology, Inc. PEX8112 x1 Lane PCI Express-to-PCI Bridge (rev aa)"
b=`lspci`




#
tmp='aa_aa'

setpci=`setpci -d 168c:001b 0x3C.B=aa`

current=`setpci -d 168c:001b 0x3C.B | tr -d ' '`
current=$(echo $current | tr ' ' _ | tr \" ' ')

if [ xx$axx = xx$bxx ];
then 
	echo "PCI read/write Test - Passed"
	if [ "$current" = "$tmp" ];
	then 
	     echo "$txtgrn PCI ENUMERATION - PASSED $txtrst"
	else echo "PCI read/write Test - Failed"
	fi  
	
else echo "PCI ENUMERATION - FAILED"
fi





modprobe sdhci-cns3xxx
modprobe mmc-block 
mkdir /mnt/mmc
mount /dev/mmcblk0p1 /mnt/mmc
cd /mnt/mmc
chmod 777 i2c.sh
modprobe cns3xxx
ifconfig eth0 192.168.0.111
ifconfig eth1 192.168.0.112
ifconfig eth2 192.168.0.114

a="5 packets transmitted, 5 packets received, 0% packet loss"
b=`ping -c 5 -q 192.168.1.103 | grep packets | cut -d ] -f 2`

if [ xx$axx = xx$bxx ];
then  
	     echo "ETHERNET TEST - PASSED "
	
else echo "ETHERNET TEST - FAILED"
fi





